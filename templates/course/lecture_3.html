{% extends 'course/course_base.html' %}
{% load static %}
{% block title %} Лекция 3 {% endblock title %}

{% block theme %}
<div class="left-ads-display col-lg-8">
    <div class="content-section">
        <ul id="theme-slides">
            <li class="theme-slide" id="0">
                <p>
                    Если рассматривать визуальные новеллы с точки зрения механик, то они имеют лишь небольшой геймплей,
                    зачастую это выборы реплик для персонажей. Но как раз из-за простого геймплей в такие игры часто
                    добавляют интересный механики и фишки.
                    Большинство визуальных новелл, занимающих верхние строчки Steam, простенькие симуляторы свиданий
                    (dating sim). В них всё поверхностно и понятно. Красивые картинки, приятная музыка, милые персонажи
                    и неспешные реплики.
                </p>
                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="/static/images/article_2_1.png" alt="">
                    <span class="img-lecture-name">Пример - I Love You, Colonel Sanders!</span>
                </div>
                <p>
                    Но есть новеллы, которые заставляют посмотреть на этот жанр под другим, более глубоким и насыщенным
                    углом. Одни из таких “нестандартных” новелл, где игра используется как некий инструмент:
                </p>
                <ul>
                    <li class="lect_li"><p>психологические. Новелла Depression Quest объясняет игроку, как работает
                        депрессия;</p></li>
                    <li class="lect_li"><p>обучающие. Новелла для дистанционного изучения языка, где для поддержания
                        вовлеченности учеников используется игровая история;
                    </p></li>
                    <li class="lect_li"><p>«медицинские». Новелла Laze eyе shooter — игра-терапия для восстановления
                        зрения;</p></li>
                    <li class="lect_li"><p>симуляторы. Новеллы Ace Attorney, Aviary Attorney, где игрок становится
                        адвокатом.</p></li>
                </ul>
                <br>
                <p>То есть уже становится понятно, что сам жанр таких игр может быть не только милым симулятором про
                    кошко-девочек. Теперь посмотрим, какие ещё интересные механики и инструменты существуют.</p>
                <p>Основная часть, база, фундамент любой новеллы - система выбора и сами диалоги. Всё повествование,
                    описание мест, персонажей, ситуаций, в которые они попадают, их чувства и эмоции, всё это строится с
                    помощью текста и с визуальным дополнением. Чем интереснее свяжется словесная нить в воронку,
                    затягивающую игрока прямиков в историю, чем точнее визуальная часть передаст настроение, тем лучше.
                    Текст и визуал - самый важный инструмент. И к этому инструменту идёт интересное дополнение в виде
                    вариативности повествования. Самая история может быть линейной или с десятком ответвлений, ведущими
                    в другие финалы повествования. А иногда лишь схитрить так, что игрок подумает, что он что-то может
                    решить своим выбором, но на деле конец будет только один.</p>
                <p>
                    Иногда, для поддержки кор-гемплея, придумывают и дополнительные механики. Например, в вышеупомянутых
                    симуляторах свиданий есть “система взаимоотношений” с персонажами. Или ещё существует прокачка
                    игрока, как в игре под названием Monster Prom. Бывают и полноценные механики расследования, как в
                    Danganronpa. А в Coffee Talk, можно насладиться дополнительным симулятором бариста, приготовить кофе
                    самому.
                </p>
                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="/static/images/article_2_3.png" alt="">
                    <span class="img-lecture-name">Monster Prom</span>
                </div>
                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="/static/images/article_2_2.png" alt="">
                    <span class="img-lecture-name">Coffee Talk</span>
                </div>
                <p><b>The Lion's Song.</b> Игра хранящая в себе множество интересных механик, непривычных для
                    текстовых\визуальных новелл. Там есть и выбор куда отправится, позволяя пройтись по городу и
                    почувствовать быт тех лет. А для каждой истории персонажей есть свои индивидуальные механики. Для
                    скрипачки - “ищем вдохновение”. Художнику - помогаем написать портрет, угадывая по фразам человека,
                    каким же его нужно изобразить. А для ученой пытаемся найти формулы, по её смутным описаниям. Или уже
                    вместе с солдатом стараемся приободрить попутчиков разговором, снова угадывая их желания.</p>
                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="/static/images/article_2_4.png" alt="">
                </div>
                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="/static/images/article_2_5.png" alt="">
                    <span class="img-lecture-name">The Lion's Song</span>
                </div>
                <p><b>The Red Strings Club.</b> Ещё одна интересная новелла с очень глубокой идеей. Она состоит в том,
                    чтобы задать игроку вопрос, где же границы допустимого влияния технологий на человека..? И к такому
                    интересному вопросу есть соответствующие механики. Например, бармен решает, о чём именно он хочет
                    поговорить с посетителем. И он же может смешать коктейль под настроение диалога, успех изготовления
                    которого напрямую влияет на разговорчивость гостя. Даже существует “викторина”, когда ИИ самой игры
                    задаёт игроку вопрос, о посещавших бар гостях. Если игрок отвечает правильно, то ему дают подсказку
                    о будущих посетителях. Это уловка заставляет вчитываться в отчёты гостей и понимать их истории. А во
                    время сюжета за ИИ мы будем сидеть и вытачивать импланты разной формы! У Хакера другой подход, нужно
                    будет использовать компьютер и данные других сотрудников, чтобы пробираться в кабинеты и стирать
                    данные.</p>
                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="/static/images/article_2_6.png" alt="">
                </div>
                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="/static/images/article_2_7.png" alt="">
                    <span class="img-lecture-name">The Red Strings Club</span>
                </div>
                <p>
                    Итак, любая хорошая визуальная новелла привлекает красивой картинкой, а дальше затягивает в
                    повествование за счёт влияния игрока на течение сюжета. С помощью идеи, текстов, диалогов,
                    визуальных решений и, самое главное, интересных механик геймдизайнер позволяет игроку погрузиться в
                    созданный этим дизайнером мир. Жанр визуальных новелл популярен, поэтому разработчикам приходится
                    придумывать что-то новое, проявлять смекалку и оригинальность, чтобы выделяться среди других. И
                    такие авторские подходы ценятся аудиторией больше всего. Кто-то делает упор в текст, кто-то на
                    картинку, а кто-то на необычные механики, но ясно одно - жанр умеет удивлять.
                </p>

                <ul>
                    <li class="lect_li"><p>Короткое имя может отличаться от полного, если полное очень длинное;</p></li>
                    <li class="lect_li"><p>Имя собранного пакета создается по типу: com.краткое название вашей
                        организации.краткое имя данной новеллы;</p></li>
                    <li class="lect_li"><p>При обновлении изменяйте версию игры;</p></li>
                    <li class="lect_li"><p>Код версии тоже нужно изменять при обновлении;</p></li>
                    <li class="lect_li"><p>Если ваша новелла горизонтальная - выбирайте альбомный вид, если вертикальная
                        - портретный. По желанию пользователя требует отрисовки обеих ориентаций и сложную
                        настройку;</p></li>
                    <li class="lect_li"><p>Микротранзакции отключаем;</p></li>
                    <li class="lect_li"><p>Если игра меньше 100 Мб, выбирайте создание пакета без кеша, если больше - с
                        ним;</p></li>
                    <li class="lect_li"><p>Доступ в интернет не нужен;</p></li>
                    <li class="lect_li"><p>Исходный код Java нужно обновлять автоматически;</p></li>
                </ul>
                <br>
                <h5>Сборка на Windows/Mac/Linux</h5>
                <p>Сперва нужно нажать на кнопку построить дистрибутивы.</p>
                <p>Далее нужно редактировать options.rpy. Имя папки и имя исполняемого файла заполняются автоматически,
                    их можно изменить в следующей строке (желательно, без пробелов, кириллицы и заглавных букв):</p>
                <div class="code-wrap">
                    <pre>define build.name = "Название вашей новеллы"</pre>
                </div>
                <p>В конце этого файла находятся строки, которые могут спрятать файлы от пользователя в архиве с игрой.
                    Это необходимо, чтобы ваш игрок не украл вашу новеллу. Чтобы спрятать скрипты, музыку,
                    видео и картинки скопируйте эту строку и измените в каждой формат на .rpy(скрипты), .jpg,
                    .ogg(музыка), .ogv(видео).</p>
                <div class="code-wrap"><pre>$ renpy.movie_cutscene('video/cutscene.ogv') #1
$ renpy.movie_cutscen('video/cutscene.ogv') #2
$ renpy.movie_cutscene('video/cutscene.ogg') #3
$ renpy.movie_cutscene('videos/cutscene.ogv') #4
</pre>
                </div>

                <p>Теперь вы можете нажать на кнопку построить. Созданные архивы нужно распаковать и теперь в
                    вашу новеллу можно играть.</p>


                <div class="image-lecture-wrap">
                    <img class="image-lecture image-lecture-sm" src="/static/images/lect_10_1.png">
                </div>

                <div class="code-wrap">
                    <pre><code class="language-python">define config.main_menu_music = "<название файла с расширением>"</code></pre>
                </div>
                <p>Если всё сделано верно, то при запуске новеллы, будет играть музыка.</p>
                <h5>Музыка в игре</h5>
                <p>По умолчанию в папке game уже есть папка audio, но для удобства лучше завести 2 папки (одну для
                    музыки, вторую для звуков). Папки можно назвать соответственно music и sounds. Для дальнейшей
                    работы поместите все нужные вам файлы с музыкальным оформлением в эти папки.</p>
                <p>Сначала RenPy нужно указать, что у нас есть эти файлы с музыкой. В файле script.rpy, там где мы
                    объявляем переменные пишем следующее:</p>
                <div class="code-wrap">
                    <pre>define audio.<название переменной для звука> = "<путь к файлу>"</pre>
                </div>
                <p>Например, в скрипте будет обращение к данной мелодии musfunny, так как мелодия веселая. А сам файл
                    называется funny-music.ogg и лежит в папке game/music. Тогда объявление переменной для данной
                    мелодии будет таким:</p>
                <div class="code-wrap">
                    <pre>define audio.musfunny = "music/funny-music.ogg"</pre>
                </div>
                <p>Добавьте по аналогии и другие файлы с музыкой, если таковые имеются.</p>
                <p>Файлы со звуками добавляются точно так же. Если звуки у вас лежат в папке game/sounds, то поменяется
                    только путь. Например, у нас есть звук звонящего телефона с названием phone.ogg и лежит он в папке
                    game/sounds. Тогда переменная будет добавлена так:</p>
                <div class="code-wrap">
                    <pre>define audio.phone = "sounds/phone.ogg"</pre>
                </div>
                <p>Звуки добавлены, но в игре они еще не используются. Пришло время их задействовать и разнообразить
                    повествование.</p>
                <p>Ранее в главное меню мы добавили звуковое оформление. Но если вы запускали свою новеллу, вы,
                    наверное, заметили, что при начале игры музыка продолжает играть, хотя из меню мы уже вышли.
                    Исправим это.</p>
                <p>Там, где начинается новелла, в label start в самом начале укажем другую музыку. Команда очень
                    простая - play music и название переменной с нужной музыкой. Ранее мы создали переменную
                    musfunny, используем ее. Если вам сначала надо вывести фон или какие-либо реплики, то пишите
                    сначала соответствующие команды, а уже потом проигрывание музыки.</p>
                <div class="code-wrap"><pre>label start:
    play music musfunny</pre>
                </div>
                <p>Для смены музыки необходимо написать ту же команду, но с другим названием переменной. Допустим, у
                    нас есть переменная со страшной музыкой musscary, скрипт будет выглядеть следующим образом:</p>
                <div class="code-wrap"><pre>label start:
    play music musfunny
    <ваш код игры>
    "И тут случилось страшное…"
    play music musscary</pre>
                </div>
                <p>Этот скрипт изменит фоновую музыку после реплики “И тут случилось страшное…”. Чтобы музыка менялась
                    более плавно, можно сначала заглушить первую и мелодию, а потом запустить вторую.</p>
                <p>Команда для остановки музыки - stop music. К ней можно добавить затухание при помощи слова fadeout и
                    длительности самого затухания в секундах.</p>
                <p>Пример:</p>
                <div class="code-wrap">
                    <pre>stop music fadeout 1</pre>
                </div>
                <p>Данная строка означает, что музыка будет затухать в течение 1 секунды. После затухания останется
                    тишина. В нужном месте уже изученной командой play music можно запустить другую мелодию. </p>

                <div class="code-wrap"><pre><code class="language-python">label start:
    play music musfunny
    <ваш код игры>
    stop music fadeout 1
    "И тут случилось страшное…"
        play music musscary</code></pre>
                </div>
                <p>С музыкой разобрались, остались звуки. Звуки могут проигрываться параллельно с музыкой.
                    Для этого воспользуемся командой play sound:</p>

                <div class="code-wrap">
                    <pre>play sound <название звука></pre>
                </div>
                <p>Допустим, у кого-то из героев зазвонил телефон, используем ранее созданную переменную phone.</p>

                <div class="code-wrap"><pre>label start:
    play music musfunny
    <ваш код игры>
    play sound phone
    "Зазвонил мой телефон"
    <ваш код игры>
    stop music fadeout 1
    "И тут случилось страшное…"
    play music musscary</pre>
                </div>
                <p>Команды play music и play sound очень похожи. В чем же их отличие? Звук воспроизводится только
                    один раз, а музыка играет зациклено. То есть, если у вас музыка длится 5 минут, то по окончании,
                    она начнет играть снова.</p>


                <p>Поговорим об изменении значения числовой переменной. Для этого чуть поменяем код. Вместо 7000 везде
                    напишем переменную money, которую создали в самом начале.</p>
                <a data-toggle="collapse" href="#open-code-2" class="open-code">
                    <i class="fa fa-chevron-down down-symb" aria-hidden="true"></i>
                    Код для самопроверки
                </a>
                <div class="collapse" id="open-code-2">
                    <div class="code-wrap"><pre><code class="language-python">define money = 7000
label start:
    $ spent_money = renpy.input("Сколько потратить денег?", length=4, allow="0123456789").strip() or "0"
    $ spent_money = int(spent_money)
    if spent_money > money:
        $ spent_money = money
    if spent_money == 0:
        "Вы не потратили ни копейки."
    elif spent_money == money:
        "Вы потратили все деньги."
    else:
        "Вы потратили [spent_money]."</code></pre>
                    </div>
                </div>

                <a data-toggle="collapse" href="#open-code-3" class="open-code">
                    <i class="fa fa-chevron-down down-symb" aria-hidden="true"></i>
                    Весь код с урока
                </a>
                <div class="collapse" id="open-code-3">
                    <div class="code-wrap"><pre>define money = 7000
label start:
    $ spent_money = renpy.input("Сколько потратить денег?", length=4, allow="0123456789").strip() or "0"
    $ spent_money = int(spent_money)
    if spent_money > money:
        $ spent_money = money
    if spent_money == 0:
        "Вы не потратили ни копейки."
    elif spent_money == money:
        "Вы потратили все деньги."
    else:
        "Вы потратили [spent_money]."
    $ money = money - spent_money
    "У игрока осталось [money] монет."</pre>
                    </div>
                </div>
                <br>


                <ol class="lect_ol">
                    <li class="lect_li">if (проверка первого условия)</li>
                    <li class="lect_li">elif (проверка второго условия, если первое не выполнилось)</li>
                    <li class="lect_li">else (если все условия выше не выполнились, будет сделано то, что после else)
                    </li>
                </ol>


                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="/static/images/lect_2_10.png">
                    <span class="img-lecture-name">Содержимое options.rpy</span>
                </div>
                <p>Также есть 2 файла для графических настроек. Это файл gui.rpy, который позволяет менять графический
                    интерфейс игры.</p>
                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="/static/images/lect_2_11.png">
                    <span class="img-lecture-name">Содержимое gui.rpy</span>
                </div>
                <p>И файл screens.rpy, отвечающий за экраны (экраны меню, экраны паузы и т.д.)</p>
                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="/static/images/lect_2_12.png">
                    <span class="img-lecture-name">Содержимое screens.rpy</span>
                </div>

            </li>
            <li class="theme-slide" id="1">
                <h4>Персонажи и реплики (Практическая часть 3)</h4>

                <br>
                <p>Для создания персонажа прописывается в начале файла данный код:</p>


                <p>Если вам нужно вывести реплику без подписи, то в коде пишите только реплику в кавычках.</p>

                <div class="code-wrap"><p>"Реплика персонажа"</p></div>

                <p>Если в начале строки поставить #, то строка станет комментарием. Рекомендуем оставлять комментарии
                    для себя, чтобы не запутаться в коде. Также "закомментировать" можно ненужный фрагмент кода,
                    который вы не хотите удалять.</p>
                <div class="image-lecture-wrap">
                    <img class="image-lecture" src="{% static 'images/lect_3_2.png' %}">
                    <span class="img-lecture-name">Пример объявления персонажа и реплик</span>
                </div>
            </li>
            <li class="theme-slide showing" id="2">
                <h4>Персонажи и реплики (Практика 3)</h4>
                <br>
                <p>Пришло время для проверки знаний! Ответьте на все тестовые вопросы.</p>

                <form class="form-test">
                    <label for="color-format"><h5 class="question-text">1. Выберите правильные варианты написания цветов
                        в HEX формате:</h5></label>
                    <div class="checkbox-group-test" id="color-format">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="color1">
                            <label class="form-check-label" for="color1">#n66c43</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="color2">
                            <label class="form-check-label" for="color2">
                                #ba23b0
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="color3">
                            <label class="form-check-label" for="color3">
                                #5D3EA2
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="color4">
                            <label class="form-check-label" for="color4">
                                #2A4ecC
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="color5">
                            <label class="form-check-label" for="color5">
                                #fa56d65
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="input-color">
                            <h5 class="question-text">2. Введите любой оттенок серого без примесей в HEX формате,
                                воспользуйтесь любым доступным
                                Color Picker:</h5>
                        </label>
                        <input type="text" class="form-control input-test" id="input-color" placeholder="#45ff32">
                    </div>
                    <a data-toggle="collapse" href="#answer-grey">
                        <i class="fa fa-question-circle-o" aria-hidden="true"></i> Открыть подсказку
                    </a>
                    <div class="collapse" id="answer-grey">
                        <small>Возможные варианты: #b7b7b7, #1a1a1a, #3d3d3d</small>
                    </div>

                    <label for="person-format"><h5 class="question-text">3. Выберите синтаксически правильные реплики от
                        персонажа с именем
                        Эмили:</h5></label>
                    <div class="checkbox-group-test" id="person-format">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="person1">
                            <label class="form-check-label" for="person1">
                                "Привет, как дела?"
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="person2">
                            <label class="form-check-label" for="person2">
                                # Привет, как дела?
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="person3">
                            <label class="form-check-label" for="person3">
                                emily "Привет, как дела?"
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="person4">
                            <label class="form-check-label" for="person4">
                                e "Привет, как дела?"
                            </label>
                        </div>
                    </div>
                    <label for="define-person-group"><h5 class="question-text">4. Выберете правильное объявление
                        персонажа</h5></label>
                    <div id="define-person-group">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="define-person" id="define-person1"
                                   value="1">
                            <label class="form-check-label" for="define-person1">
                                define j == Caracte('Джаконда', color="#FFAA00")
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="define-person" id="define-person2"
                                   value="2">
                            <label class="form-check-label" for="define-person2">
                                defane x = Charakter('Имя', color='#FF0BB0')
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="define-person" id="define-person3"
                                   value="3">
                            <label class="form-check-label" for="define-person3">
                                define john = Character("John", color='#FFАААА')
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="define-person" id="define-person4"
                                   value="4">
                            <label class="form-check-label" for="define-person4">
                                define vanilla = Character('Ваниль'')
                            </label>
                        </div>
                    </div>
                    <br>
                    <div class="w3layouts-newsletter">
                        <button type="submit" class="btn btn1 btn-test">Проверить</button>
                    </div>
                </form>
                <br>
                <div id="task-2">
                    <h5 class="question-text">5. Напишите свой скрипт</h5>
                    <br>
                    <p>Создайте персонажа с именем “Имя1”, создайте персонажа с именем “Имя2”. Присвойте их именам
                        любые,
                        но различные цвета. Пропишите небольшой диалог между Имя1 и Имя2, вы можете самостоятельно
                        составить диалог. Добавьте слова автора. Подпишите диалог “Диалог первый” и закомментируйте
                        название. Количество реплик не ограничено, главное, чтобы была одна реплика от персонажа Имя1,
                        одна от персонажа Имя2 и одна реплика от автора.
                    </p>
                    <form class="form-test">
                        <textarea id="code" name="code"># Напишите здесь свой скрипт
define...</textarea>
                        <br>
                        <div class="w3layouts-newsletter">
                            <button type="submit" class="btn btn1 btn-test">Проверить</button>
                        </div>
                    </form>
                </div>

            </li>
        </ul>
        <div class="w3layouts-newsletter" align="center">
            <a class="btn1 btn next-slide" style="font-size: 16px">Далее</a>
        </div>
    </div>
</div>
<script>
    let editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        mode: {
            name: "python",
            version: 3,
            singleLineStringErrors: false
        },
        lineNumbers: true,
        indentUnit: 4,
        matchBrackets: true
    });
</script>

{% endblock theme  %}